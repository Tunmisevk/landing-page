<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Round Glowing Igloo on Snowy Island</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.164/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.164/examples/jsm/"
      }
    }
  </script>

  <script type="module">
    import * as THREE from "three";
    import { OrbitControls } from "three/addons/controls/OrbitControls.js";

    // Scene setup
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87ceeb); // snowy sky

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 6, 16);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableZoom = false;

    // Lighting
    scene.add(new THREE.AmbientLight(0xffffff, 0.6));
    const dirLight = new THREE.DirectionalLight(0xffffff, 1);
    dirLight.position.set(5, 10, 5);
    scene.add(dirLight);

    // Soft glow inside igloo
    const iglooLight = new THREE.PointLight(0xffffff, 1.5, 15, 2);
    iglooLight.position.set(0, 2, 0);
    scene.add(iglooLight);

    // Material for snow blocks
    const blockMaterial = new THREE.MeshStandardMaterial({
      color: 0xcccccc,
      roughness: 0.9,
      metalness: 0.0
    });

    // Igloo blocks (rounded spheres)
    const blocks = [];
    const blockRadius = 0.6;
    const iglooRadius = 4;
    const sphereGeo = new THREE.SphereGeometry(blockRadius, 16, 16);

    for (let y = 0; y < 6; y++) {
      const ringRadius = iglooRadius - y * 0.6;
      const blocksInRing = Math.max(6, Math.floor(20 - y * 3));
      for (let i = 0; i < blocksInRing; i++) {
        const angle = (i / blocksInRing) * Math.PI * 2;
        const x = Math.cos(angle) * ringRadius;
        const z = Math.sin(angle) * ringRadius;
        const block = new THREE.Mesh(sphereGeo, blockMaterial.clone());
        block.position.set(x, y * 0.9, z);
        block.lookAt(0, y * 0.9, 0);
        scene.add(block);
        blocks.push(block);
      }
    }

    // Igloo entrance
    const entranceGeo = new THREE.CylinderGeometry(1, 1, 3, 16);
    const entrance = new THREE.Mesh(entranceGeo, blockMaterial);
    entrance.rotation.x = Math.PI / 2;
    entrance.position.set(0, 1, iglooRadius + 1.5);
    scene.add(entrance);

    // Snowy island (with texture + displacement)
    const loader = new THREE.TextureLoader();
    const snowTex = loader.load("https://threejs.org/examples/textures/terrain/grasslight-big.jpg");
    snowTex.wrapS = snowTex.wrapT = THREE.RepeatWrapping;
    snowTex.repeat.set(4, 4);

    const islandGeo = new THREE.CircleGeometry(25, 128);
    const islandMat = new THREE.MeshStandardMaterial({
      map: snowTex,
      color: 0xffffff,
      roughness: 1,
      metalness: 0
    });

    const island = new THREE.Mesh(islandGeo, islandMat);
    island.rotation.x = -Math.PI / 2;
    island.position.y = 0;
    scene.add(island);

    // Snowfall particles
    const snowGeo = new THREE.BufferGeometry();
    const snowCount = 1000;
    const positions = [];
    for (let i = 0; i < snowCount; i++) {
      positions.push((Math.random() - 0.5) * 100); // x
      positions.push(Math.random() * 50);          // y
      positions.push((Math.random() - 0.5) * 100); // z
    }
    snowGeo.setAttribute("position", new THREE.Float32BufferAttribute(positions, 3));
    const snowMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.2 });
    const snow = new THREE.Points(snowGeo, snowMat);
    scene.add(snow);

    function animateSnow() {
      const pos = snowGeo.attributes.position;
      for (let i = 0; i < pos.count; i++) {
        pos.array[i * 3 + 1] -= 0.05;
        if (pos.array[i * 3 + 1] < 0) pos.array[i * 3 + 1] = 50;
      }
      pos.needsUpdate = true;
    }

    // Scroll zoom
    let targetZoom = 16;
    window.addEventListener("wheel", (event) => {
      if (event.deltaY > 0) {
        targetZoom += 1;
      } else {
        targetZoom = Math.max(6, targetZoom - 1);
      }
    });

    // Animate
    const clock = new THREE.Clock();
    function animate() {
      requestAnimationFrame(animate);

      const t = clock.getElapsedTime();
      blocks.forEach((block, i) => {
        block.position.y += Math.sin(t * 2 + i) * 0.002;
      });

      animateSnow();

      camera.position.z += (targetZoom - camera.position.z) * 0.05;

      renderer.render(scene, camera);
    }
    animate();
  </script>
  <section id="igloo-section" style="width:100%; height:600px; position:relative; overflow:hidden;">
  <canvas id="igloo-canvas"></canvas>
</section>

<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.164/build/three.module.js"
  }
}
</script>

<script type="module">
import * as THREE from "three";

const container = document.getElementById("igloo-section");
const canvas = document.getElementById("igloo-canvas");
const renderer = new THREE.WebGLRenderer({ antialias: true, canvas });
renderer.setSize(container.clientWidth, container.clientHeight);

// Scene & Camera
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb); // snowy sky
const camera = new THREE.PerspectiveCamera(60, container.clientWidth/container.clientHeight, 0.1, 1000);
camera.position.set(0, 6, 16);

// Lights
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const dirLight = new THREE.DirectionalLight(0xffffff, 1);
dirLight.position.set(5,10,5);
scene.add(dirLight);

// Glow inside igloo
const iglooLight = new THREE.PointLight(0xffffff, 1.5, 15, 2);
iglooLight.position.set(0, 2, 0);
scene.add(iglooLight);

// Igloo blocks (rounded spheres)
const blockMaterial = new THREE.MeshStandardMaterial({ color: 0xcccccc, roughness: 0.9 });
const blocks = [];
const blockRadius = 0.6;
const iglooRadius = 4;
const sphereGeo = new THREE.SphereGeometry(blockRadius, 16, 16);

for (let y = 0; y < 6; y++) {
  const ringRadius = iglooRadius - y * 0.6;
  const blocksInRing = Math.max(6, Math.floor(20 - y * 3));
  for (let i = 0; i < blocksInRing; i++) {
    const angle = (i / blocksInRing) * Math.PI * 2;
    const x = Math.cos(angle) * ringRadius;
    const z = Math.sin(angle) * ringRadius;
    const block = new THREE.Mesh(sphereGeo, blockMaterial.clone());
    block.position.set(x, y * 0.9, z);
    block.lookAt(0, y * 0.9, 0);
    scene.add(block);
    blocks.push(block);
  }
}

// Igloo entrance
const entranceGeo = new THREE.CylinderGeometry(1, 1, 3, 16);
const entrance = new THREE.Mesh(entranceGeo, blockMaterial);
entrance.rotation.x = Math.PI / 2;
entrance.position.set(0, 1, iglooRadius + 1.5);
scene.add(entrance);

// Snowy island
const loader = new THREE.TextureLoader();
const snowTex = loader.load("https://threejs.org/examples/textures/terrain/grasslight-big.jpg");
snowTex.wrapS = snowTex.wrapT = THREE.RepeatWrapping;
snowTex.repeat.set(4,4);
const islandGeo = new THREE.CircleGeometry(25, 128);
const islandMat = new THREE.MeshStandardMaterial({ map: snowTex, color: 0xffffff });
const island = new THREE.Mesh(islandGeo, islandMat);
island.rotation.x = -Math.PI / 2;
scene.add(island);

// Snowfall particles
const snowGeo = new THREE.BufferGeometry();
const snowCount = 1000;
const positions = [];
for (let i = 0; i < snowCount; i++) {
  positions.push((Math.random() - 0.5) * 100);
  positions.push(Math.random() * 50);
  positions.push((Math.random() - 0.5) * 100);
}
snowGeo.setAttribute("position", new THREE.Float32BufferAttribute(positions, 3));
const snowMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.2 });
const snow = new THREE.Points(snowGeo, snowMat);
scene.add(snow);

// Scroll zoom
let targetZoom = 16;
window.addEventListener("wheel", (e) => {
  if (e.deltaY > 0) targetZoom += 1;
  else targetZoom = Math.max(6, targetZoom - 1);
});

// Resize
window.addEventListener("resize", () => {
  const w = container.clientWidth;
  const h = container.clientHeight;
  renderer.setSize(w, h);
  camera.aspect = w/h;
  camera.updateProjectionMatrix();
});

// Animate
const clock = new THREE.Clock();
function animate() {
  requestAnimationFrame(animate);

  const t = clock.getElapsedTime();
  blocks.forEach((block,i)=> {
    block.position.y += Math.sin(t*2+i) * 0.002;
  });

  // Snowfall
  const pos = snowGeo.attributes.position;
  for (let i = 0; i < pos.count; i++) {
    pos.array[i*3+1] -= 0.05;
    if (pos.array[i*3+1] < 0) pos.array[i*3+1] = 50;
  }
  pos.needsUpdate = true;

  // Smooth zoom
  camera.position.z += (targetZoom - camera.position.z) * 0.05;

  renderer.render(scene, camera);
}
animate();
</script>
  <section id="igloo-section" style="width:100%; height:600px; position:relative; overflow:hidden;">
  <canvas id="igloo-canvas"></canvas>
</section>

<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.164/build/three.module.js"
  }
}
</script>

<script type="module">
import * as THREE from "three";

const container = document.getElementById("igloo-section");
const canvas = document.getElementById("igloo-canvas");
const renderer = new THREE.WebGLRenderer({ antialias: true, canvas });
renderer.setSize(container.clientWidth, container.clientHeight);

// Scene & Camera
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb); // snowy sky
const camera = new THREE.PerspectiveCamera(60, container.clientWidth/container.clientHeight, 0.1, 1000);
camera.position.set(0, 6, 16);

// Lights
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const dirLight = new THREE.DirectionalLight(0xffffff, 1);
dirLight.position.set(5,10,5);
scene.add(dirLight);

// Glow inside igloo
const iglooLight = new THREE.PointLight(0xffffff, 1.5, 15, 2);
iglooLight.position.set(0, 2, 0);
scene.add(iglooLight);

// Igloo blocks (rounded spheres)
const blockMaterial = new THREE.MeshStandardMaterial({ color: 0xcccccc, roughness: 0.9 });
const blocks = [];
const blockRadius = 0.6;
const iglooRadius = 4;
const sphereGeo = new THREE.SphereGeometry(blockRadius, 16, 16);

for (let y = 0; y < 6; y++) {
  const ringRadius = iglooRadius - y * 0.6;
  const blocksInRing = Math.max(6, Math.floor(20 - y * 3));
  for (let i = 0; i < blocksInRing; i++) {
    const angle = (i / blocksInRing) * Math.PI * 2;
    const x = Math.cos(angle) * ringRadius;
    const z = Math.sin(angle) * ringRadius;
    const block = new THREE.Mesh(sphereGeo, blockMaterial.clone());
    block.position.set(x, y * 0.9, z);
    block.lookAt(0, y * 0.9, 0);
    scene.add(block);
    blocks.push(block);
  }
}

// Igloo entrance
const entranceGeo = new THREE.CylinderGeometry(1, 1, 3, 16);
const entrance = new THREE.Mesh(entranceGeo, blockMaterial);
entrance.rotation.x = Math.PI / 2;
entrance.position.set(0, 1, iglooRadius + 1.5);
scene.add(entrance);

// Snowy island
const loader = new THREE.TextureLoader();
const snowTex = loader.load("https://threejs.org/examples/textures/terrain/grasslight-big.jpg");
snowTex.wrapS = snowTex.wrapT = THREE.RepeatWrapping;
snowTex.repeat.set(4,4);
const islandGeo = new THREE.CircleGeometry(25, 128);
const islandMat = new THREE.MeshStandardMaterial({ map: snowTex, color: 0xffffff });
const island = new THREE.Mesh(islandGeo, islandMat);
island.rotation.x = -Math.PI / 2;
scene.add(island);

// Snowfall particles
const snowGeo = new THREE.BufferGeometry();
const snowCount = 1000;
const positions = [];
for (let i = 0; i < snowCount; i++) {
  positions.push((Math.random() - 0.5) * 100);
  positions.push(Math.random() * 50);
  positions.push((Math.random() - 0.5) * 100);
}
snowGeo.setAttribute("position", new THREE.Float32BufferAttribute(positions, 3));
const snowMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.2 });
const snow = new THREE.Points(snowGeo, snowMat);
scene.add(snow);

// Scroll zoom
let targetZoom = 16;
window.addEventListener("wheel", (e) => {
  if (e.deltaY > 0) targetZoom += 1;
  else targetZoom = Math.max(6, targetZoom - 1);
});

// Resize
window.addEventListener("resize", () => {
  const w = container.clientWidth;
  const h = container.clientHeight;
  renderer.setSize(w, h);
  camera.aspect = w/h;
  camera.updateProjectionMatrix();
});

// Animate
const clock = new THREE.Clock();
function animate() {
  requestAnimationFrame(animate);

  const t = clock.getElapsedTime();
  blocks.forEach((block,i)=> {
    block.position.y += Math.sin(t*2+i) * 0.002;
  });

  // Snowfall
  const pos = snowGeo.attributes.position;
  for (let i = 0; i < pos.count; i++) {
    pos.array[i*3+1] -= 0.05;
    if (pos.array[i*3+1] < 0) pos.array[i*3+1] = 50;
  }
  pos.needsUpdate = true;

  // Smooth zoom
  camera.position.z += (targetZoom - camera.position.z) * 0.05;

  renderer.render(scene, camera);
}
animate();
</script>
  <section id="igloo-section" style="width:100%; height:600px; position:relative; overflow:hidden;">
  <canvas id="igloo-canvas"></canvas>
</section>

<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.164/build/three.module.js"
  }
}
</script>

<script type="module">
import * as THREE from "three";

const container = document.getElementById("igloo-section");
const canvas = document.getElementById("igloo-canvas");
const renderer = new THREE.WebGLRenderer({ antialias: true, canvas });
renderer.setSize(container.clientWidth, container.clientHeight);

// Scene & Camera
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb); // snowy sky
const camera = new THREE.PerspectiveCamera(60, container.clientWidth/container.clientHeight, 0.1, 1000);
camera.position.set(0, 6, 16);

// Lights
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const dirLight = new THREE.DirectionalLight(0xffffff, 1);
dirLight.position.set(5,10,5);
scene.add(dirLight);

// Glow inside igloo
const iglooLight = new THREE.PointLight(0xffffff, 1.5, 15, 2);
iglooLight.position.set(0, 2, 0);
scene.add(iglooLight);

// Igloo blocks (rounded spheres)
const blockMaterial = new THREE.MeshStandardMaterial({ color: 0xcccccc, roughness: 0.9 });
const blocks = [];
const blockRadius = 0.6;
const iglooRadius = 4;
const sphereGeo = new THREE.SphereGeometry(blockRadius, 16, 16);

for (let y = 0; y < 6; y++) {
  const ringRadius = iglooRadius - y * 0.6;
  const blocksInRing = Math.max(6, Math.floor(20 - y * 3));
  for (let i = 0; i < blocksInRing; i++) {
    const angle = (i / blocksInRing) * Math.PI * 2;
    const x = Math.cos(angle) * ringRadius;
    const z = Math.sin(angle) * ringRadius;
    const block = new THREE.Mesh(sphereGeo, blockMaterial.clone());
    block.position.set(x, y * 0.9, z);
    block.lookAt(0, y * 0.9, 0);
    scene.add(block);
    blocks.push(block);
  }
}

// Igloo entrance
const entranceGeo = new THREE.CylinderGeometry(1, 1, 3, 16);
const entrance = new THREE.Mesh(entranceGeo, blockMaterial);
entrance.rotation.x = Math.PI / 2;
entrance.position.set(0, 1, iglooRadius + 1.5);
scene.add(entrance);

// Snowy island
const loader = new THREE.TextureLoader();
const snowTex = loader.load("https://threejs.org/examples/textures/terrain/grasslight-big.jpg");
snowTex.wrapS = snowTex.wrapT = THREE.RepeatWrapping;
snowTex.repeat.set(4,4);
const islandGeo = new THREE.CircleGeometry(25, 128);
const islandMat = new THREE.MeshStandardMaterial({ map: snowTex, color: 0xffffff });
const island = new THREE.Mesh(islandGeo, islandMat);
island.rotation.x = -Math.PI / 2;
scene.add(island);

// Snowfall particles
const snowGeo = new THREE.BufferGeometry();
const snowCount = 1000;
const positions = [];
for (let i = 0; i < snowCount; i++) {
  positions.push((Math.random() - 0.5) * 100);
  positions.push(Math.random() * 50);
  positions.push((Math.random() - 0.5) * 100);
}
snowGeo.setAttribute("position", new THREE.Float32BufferAttribute(positions, 3));
const snowMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.2 });
const snow = new THREE.Points(snowGeo, snowMat);
scene.add(snow);

// Scroll zoom
let targetZoom = 16;
window.addEventListener("wheel", (e) => {
  if (e.deltaY > 0) targetZoom += 1;
  else targetZoom = Math.max(6, targetZoom - 1);
});

// Resize
window.addEventListener("resize", () => {
  const w = container.clientWidth;
  const h = container.clientHeight;
  renderer.setSize(w, h);
  camera.aspect = w/h;
  camera.updateProjectionMatrix();
});

// Animate
const clock = new THREE.Clock();
function animate() {
  requestAnimationFrame(animate);

  const t = clock.getElapsedTime();
  blocks.forEach((block,i)=> {
    block.position.y += Math.sin(t*2+i) * 0.002;
  });

  // Snowfall
  const pos = snowGeo.attributes.position;
  for (let i = 0; i < pos.count; i++) {
    pos.array[i*3+1] -= 0.05;
    if (pos.array[i*3+1] < 0) pos.array[i*3+1] = 50;
  }
  pos.needsUpdate = true;

  // Smooth zoom
  camera.position.z += (targetZoom - camera.position.z) * 0.05;

  renderer.render(scene, camera);
}
animate();
</script>
</body>
</html>
